<div class="container pt-3">

  <app-page-title [title]="title" [subTitle]="subTitle" [printerEnabled]="true" [buttons]="buttons"></app-page-title>

  <div class="service-title mb-3">
    <div class="row">
      <div class="col-md-6 ps-4">
      </div>
      <div class="col-md-6 pe-4" style="text-align: right;">
        Orden de Servicio No: {{vehicle.idVehiculo}} <span class="badge bg-secondary d-print-none">
          <select [(ngModel)]="service.estatusServicio" (change)="updateStatus()">
            <option *ngFor="let item of statusList"
              [selected]="item.idEstatusServicio==service.estatusServicio.idEstatusServicio"
              [ngValue]="item">{{item.estatusServicio}}</option>
          </select>
        </span>
      </div>
    </div>
  </div>

  <hr>
  <div class="row">
    <div class="col-md-8 ">
      <div class="container">
        <div class="row">
          <div class="col-md-6 ">
            <div class="service-title">Datos del Cliente</div>
            <div class="p-2">
              <div>Cliente: {{ currentCustomer.nombre + ' ' + currentCustomer.apellidoPaterno}}</div>
              <div>Tel: {{ currentCustomer.telefono }}</div>
            </div>
            <div class="service-title mt-2">Datos del Vehiculos</div>
            <div class="p-2">
              <div>Marca:
                {{ vehicle.modelo.marca.marca | titlecase}}
              </div>
              <div>Modelo: {{ vehicle.modelo.modelo }}</div>
              <div>AÃ±o: {{ vehicle.anioModelo }}</div>
              <div>
                VIN:
                <button class="btn btn-link btn-sm" [routerLink]="'/admin/recepcion/vehiculos/' + vehicle.idVehiculo">
                  {{ vehicle.vin | uppercase }}  <i class="bi bi-link-45deg"></i>
                </button>
              </div>
            </div>

            <div class="service-title">Descripcion de la Falla  <span class="badge bg-secondary d-print-none">{{service.estatusServicio.estatusServicio}}</span></div>
              <div class="p-2">

                <div> <strong>{{service.falla | titlecase}}</strong></div>
                <div class="service-subtitle mt-3">Observaciones:</div>
                <div>{{service.observaciones |titlecase}}</div>

                <!-- To do: asociar con empleado  -->
                <!-- <div class="service-subtitle mt-3">Atendio</div>
                  <div>Nombre del Empleado</div> -->

                <div class="service-subtitle mt-2">Fecha y Hora</div>
                <div> {{ service.fechaOrden | date:'short'}}</div>
              </div>

          </div>
          <div class="col-md-6 ">
            <!-- <div class="service-title">{{service.falla | titlecase}}</div> -->
            <!-- <app-vehicle-card [vehicle]="vehicle"></app-vehicle-card> -->
            <img [src]="vehicle.imagen" style="width: 100%" alt="">


          </div>
        </div>



        <div class="d-flex d-print-none justify-content-between service-subtitle mt-3">
          <div class="">Comentarios</div>
          <div><button class="btn btn-outline-dark btn-sm" (click)="displayBoxComment()">Agregar comentario</button></div>
        </div>
        <div class="mt-3 d-print-none" *ngIf="showBoxComment; else comments">
          <textarea class="p-2" name=""  id="newComment"  rows="7" style="width:100%" [(ngModel)]="newComment"></textarea>
          <div class="text-end">
            <button class="btn btn-primary" (click)="addComment()">Grabar</button>
            <button class="btn btn-danger" (click)="showBoxComment=false">Cancelar</button>
          </div>
        </div>
        <ng-template #comments>

          <pre class="comentarios mt-3 p-3 d-print-none">{{ service.comentarios}}</pre>
        </ng-template>

      </div>

    </div>
    <div class="col-md-4">
      <div class="service-title d-print-none">
        <table style="width: 100%">
          <tr>
            <td>Cuenta</td>
            <td style="text-align: right"><button class="btn btn-danger" (click)="regresar()">Regresar</button></td>
          </tr>
        </table>
      </div>

      <hr>
      <div class="">
        <table style="width:100%">
          <tr>
            <td colspan="2">Aceite</td>
            <td class="text-right" style="width:80px">800.00</td>
          </tr>
          <tr>
            <td colspan="2" class="last-line">Mano de obra</td>
            <td class="last-line text-right">300.00</td>
          </tr>
          <tr>
            <td></td>
            <td class="text-right" style="font-weight: bold;">Total $</td>
            <td class=text-right>1100.00</td>
          </tr>


          <tr class="d-print-none">
            <td></td>
            <td style="text-align:right">
              <div class="btn-group mt-3" role="group">
                <button type="button" class="btn btn-success">Autorizar</button>
                <button type="button" class="btn btn-danger">Cancelar</button>
                <!-- <button type="button" class="btn btn-secondary">Pagar</button> -->
              </div>
            </td>
          </tr>

        </table>

      </div>
    </div>

  </div>
  <div class="d-none d-print-block p-2" style="font-size: smaller;">
    Terminos y Condiciones
    <div class="mt-2">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ut erat placerat, placerat dui eget, semper neque. Maecenas ornare vitae libero euismod consectetur. Aenean ipsum est, imperdiet nec dui eget, hendrerit efficitur sem. Vestibulum imperdiet ex tortor, vel gravida libero porttitor id. Vivamus tempus dui vitae erat dictum, id tempus velit rutrum. Aenean id pharetra metus. Aliquam ornare dolor nunc, quis malesuada risus vestibulum sed. Proin et dictum mauris, quis placerat mauris. Suspendisse maximus felis eget felis iaculis dictum. Integer pellentesque velit aliquet nisl congue, in dapibus augue porttitor.
      <br><Br>
        Aenean dictum eros quis erat maximus, non ultricies lectus luctus. Etiam condimentum sapien massa, et tincidunt arcu posuere ut. Aenean accumsan quis libero consequat varius. Cras id risus a quam gravida viverra et quis nisl. Proin semper ullamcorper ornare. Sed eleifend sit amet quam eu sodales. Fusce commodo, purus venenatis tempor ultrices, velit lacus aliquam orci, at molestie lectus sem nec nulla. Vestibulum congue metus sit amet turpis faucibus interdum. Donec laoreet dapibus magna, non tristique mauris pellentesque eget. Sed ut ante vel est porta pharetra. Quisque urna velit, scelerisque ac sagittis at, blandit gravida turpis. Mauris quam diam, euismod ut efficitur vel, aliquet auctor sapien. Quisque ac est eget eros tristique fringilla.
    </div>
  </div>
</div>
<!-- <pre>
  {{ service | json }}
  {{ vehicle | json }}
</pre> -->
