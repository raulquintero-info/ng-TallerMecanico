<div class="container">

  <div><app-page-title [title]="title" [subTitle]="subTitle" [printerEnabled]="true"
      [buttons]="buttons"></app-page-title>
  </div>

  <div class="row mt-4">

    <div class="col-md-6">

      <div class="settings-title"><i class="bi bi-person-badge"></i> Datos Personales</div>

      <div class="margin-bottom" *ngIf="customer.idCliente">
        <div class="settings-content">
          <div class="row-data"><strong>Nombre: </strong>{{ customer.nombre | titlecase}}</div>
          <div class="row-data"><strong>Apellido P: </strong>{{ customer.apellidoPaterno | titlecase}}</div>
          <div class="row-data"><strong>Apellido M: </strong>{{ customer.apellidoMaterno | titlecase}}</div>
        </div>
      </div>
      <div class="margin-bottom" *ngIf="employee.idEmpleado>0">
        <div class="settings-content">
          <div class="row-data"><strong>Nombre: </strong>{{ employee.nombre | titlecase}}</div>
          <div class="row-data"><strong>Apellido P: </strong>{{ employee.apellidoPaterno | titlecase}}</div>
          <div class="row-data"><strong>Apellido M: </strong>{{ employee.apellidoMaterno | titlecase}}</div>
        </div>
      </div>
      <!-- {{ user | json}}-->
      <!-- {{ employee | json}} -->
      <div class="margin-bottom" *ngIf="employee.idEmpleado">

        <div class="settings-title"><i class="bi bi-person-lines-fill"></i> Datos del Empleado</div>

        <div class="settings-content">
          <div class="row-data"><strong>Id Empleado: </strong>{{ employee.idEmpleado}}</div>
          <div class="row-data"><strong>NSS: </strong>{{ employee.nss}}</div>
          <div class="row-data"><strong>Curp: </strong>{{ employee.curp | uppercase}}</div>
          <div class="row-data"><strong>RFC: </strong>{{ employee.rfc | uppercase}}</div>
          <div class="row-data"><strong>Puesto: </strong>{{ employee.puesto | uppercase}}</div>

        </div>

      </div>

      <div class="margin-bottom" *ngIf="customer.idCliente">

        <div class="settings-title"><i class="bi bi-person-lines-fill"></i> Datos del Cliente</div>

        <div class="settings-content">
          <div class="row-data"><strong>Id Cliente: </strong>{{ customer.idCliente}}</div>
          <div class="row-data"><strong>NSS: </strong>{{ customer.telefono}}</div>

        </div>

      </div>
    </div>
    <div class="col-md-6">
      <div class="margin-bottom">

        <div class="settings-title"><i class="bi bi-fingerprint"></i> Credenciales</div>

        <div class="settings-content">
          <div class="row-data"><strong>Usuario: </strong>{{ user.username| titlecase}}</div>
          <div class="row-data"><strong>Tipo de Usuario: </strong>{{ user.role| titlecase}}</div>
          <div class="row-data"><strong>Contraseña: </strong>
            <button class="btn btn-sm btn-link" style="font-style: italic; " (click)="onPasswordFormBtn()">[ cambiar
              ]</button>
          </div>
          <div *ngIf="showPasswordForm" class="mb-3 pt-2" style="max-width: 350px">
            <form [formGroup]="newPasswordForm">
              <fieldset class="mt-2 p-2" style="border:1px dashed #d9d9d9; background-color: #fbfbfb;">
                <legend>
                  <!-- <h6>Agregar Servicio/Producto</h6> -->
                </legend>
                <div class="ps-2">
                  <!-- Contraseña Actual: -->
                  <div>
                    <input type="password" class="form-control" name="oldPassword" formControlName="currentPassword"
                      placeholder="Contraseña Actual">
                    <div
                      *ngIf="newPasswordForm.controls.currentPassword.invalid && (newPasswordForm.controls.currentPassword.dirty || newPasswordForm.controls.currentPassword.touched)"
                      class="error-message">
                      <div *ngIf="newPasswordForm.controls.currentPassword.errors?.['required']">Debe colocar la
                        contraseña Actual.
                      </div>
                    </div>
                  </div>
                  <br>
                  <!-- Contraseña nueva: -->
                  <div>
                    <input [type]="showPassword ? 'text': 'password'" class="form-control" name="newPassword"
                      formControlName="newPassword" placeholder="Contraseña Nueva">
                    <span class="show-password-btn" (click)="setShowPassword(!showPassword)" style="font-size:18px">
                      <i class="bi" [class]="showPassword ? 'bi-eye-slash-fill' : 'bi-eye-fill'"></i>
                    </span>
                    <div
                      *ngIf="newPasswordForm.controls.newPassword.invalid && (newPasswordForm.controls.newPassword.dirty || newPasswordForm.controls.newPassword.touched)"
                      class="error-message">
                      <div *ngIf="newPasswordForm.controls.newPassword.errors?.['required']">Debe colocar la contraseña
                        Nueva.
                      </div>
                      <div *ngIf="newPasswordForm.controls.newPassword.errors?.['minlength']">Debe tener 4 caracteres.
                      </div>
                    </div>
                  </div>
                </div>
                <div class="mt-3 text-end">

                  <div *ngIf="showSpinner" class="loader" style="height:24px; top:10px; position:relative"></div>
                  <button type="button" class="btn btn-outline-success btn-sm acceptBtn ms-2 me-2 "
                    (click)="onSaveBtn()">Cambiar</button>
                  <button type="button" class="btn btn-outline-danger btn-sm cancelBtn"
                    (click)="onCancelBtn()">Cancelar</button>
                </div>
              </fieldset>
            </form>
          </div>

        </div>
      </div>


    </div>

  </div>

</div>
